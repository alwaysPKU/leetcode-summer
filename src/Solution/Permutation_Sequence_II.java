package Solution;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by zhangwei on 2017/9/23.
 * æ‰€ä»¥æˆ‘è¿˜æ˜¯å¾—ç›´æ¥æ‰¾åˆ°ç¬¬Kä¸ªåºåˆ—
 * æ˜¯çš„ï¼Œä¸Šä¸ªç®—æ³•å¾ˆé…·ä½†æ²¡ç”¨ğŸ˜
 *
 * æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¯ä¸€ä½ä¸Š1,2,3,4åˆ†åˆ«éƒ½å‡ºç°äº†6æ¬¡ï¼Œå½“ç¬¬ä¸€ä½ä¸Šçš„æ•°å­—ç¡®å®šäº†ï¼Œ
 * åé¢ä¸‰ä½ä¸Šæ¯ä¸ªæ•°å­—éƒ½å‡ºç°äº†2æ¬¡ï¼Œå½“ç¬¬äºŒä½ä¹Ÿç¡®å®šäº†ï¼Œåé¢çš„æ•°å­—éƒ½åªå‡ºç°äº†1æ¬¡ï¼Œ
 * å½“ç¬¬ä¸‰ä½ç¡®å®šäº†ï¼Œé‚£ä¹ˆç¬¬å››ä½ä¸Šçš„æ•°å­—ä¹Ÿåªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æ¥çœ‹k = 17è¿™ç§æƒ…å†µçš„æ¯ä½æ•°å­—å¦‚ä½•ç¡®å®šï¼Œ
 * ç”±äºk = 17æ˜¯è½¬åŒ–ä¸ºæ•°ç»„ä¸‹æ ‡ä¸º16ï¼š

 * æœ€é«˜ä½å¯å–1,2,3,4ä¸­çš„ä¸€ä¸ªï¼Œæ¯ä¸ªæ•°å­—å‡ºç°3ï¼= 6æ¬¡ï¼Œæ‰€ä»¥k = 16çš„ç¬¬ä¸€ä½æ•°å­—çš„ä¸‹æ ‡ä¸º16 / 6 = 2ï¼Œå³3è¢«å–å‡º
 * ç¬¬äºŒä½æ­¤æ—¶ä»1,2,4ä¸­å–ä¸€ä¸ªï¼Œk = 16æ˜¯æ­¤æ—¶çš„k' = 16 % (3!) = 4ï¼Œè€Œå‰©ä¸‹çš„æ¯ä¸ªæ•°å­—å‡ºç°2ï¼= 2æ¬¡ï¼Œ
 * æ‰€ä»¥ç¬¬äºŒæ•°å­—çš„ä¸‹æ ‡ä¸º4 / 2 = 2ï¼Œå³4è¢«å–å‡º
 * ç¬¬ä¸‰ä½æ­¤æ—¶ä»1,2ä¸­å»ä¸€ä¸ªï¼Œk' = 4æ˜¯æ­¤æ—¶çš„k'' = 4 % (2!) = 0ï¼Œè€Œå‰©ä¸‹çš„æ¯ä¸ªæ•°å­—å‡ºç°1ï¼= 1æ¬¡ï¼Œ
 * æ‰€ä»¥ç¬¬ä¸‰ä¸ªæ•°å­—çš„ä¸‹æ ‡ä¸º 0 / 1 = 0ï¼Œå³1è¢«å–å‡º
 * ç¬¬å››ä½æ˜¯ä»2ä¸­å–ä¸€ä¸ªï¼Œk'' = 0æ˜¯æ­¤æ—¶çš„k''' = 0 % (1!) = 0ï¼Œè€Œå‰©ä¸‹çš„æ¯ä¸ªæ•°å­—å‡ºç°0ï¼= 1æ¬¡ï¼Œ
 * æ‰€ä»¥ç¬¬å››ä¸ªæ•°å­—çš„ä¸‹æ ‡ä¸º0 / 1= 0ï¼Œå³2è¢«å–å‡º

 é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ‰¾å‡ºè§„å¾‹äº†
 a1 = k / (n - 1)!
 k1 = k

 a2 = k1 / (n - 2)!
 k2 = k1 % (n - 2)!
 ...

 an-1 = kn-2 / 1!
 kn-1 = kn-2 / 1!

 an = kn-1 / 0!
 kn = kn-1 % 0!
 */
public class Permutation_Sequence_II {
    public String getPermutation(int n, int k) {
        k--;
        List<Integer> numList = new ArrayList<>();
        StringBuilder result = new StringBuilder();
        for (int i =1;i<=n;i++){
            numList.add(i);
        }
        int num_permutation = 1;
        for (int i=2;i<n;i++){
            num_permutation*=i;
        }
        int mark = n-1;
        while (mark>=0){
            int indexInlist = k/num_permutation;
            result.append(numList.get(indexInlist));
            numList.remove(indexInlist);

            k=k%num_permutation;
            if (mark!=0){
                num_permutation=num_permutation/mark;
            }
            --mark;
        }
        return result.toString();

    }
}
